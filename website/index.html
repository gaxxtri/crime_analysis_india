<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>India Crime Policy Intelligence Dashboard</title>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- PapaParse -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
    <h1>India Crime Policy Intelligence Dashboard</h1>
    <p>State-wise Crime Analysis & Decision Support System</p>
</header>

<!-- ================= TABS ================= -->
<div class="tabs">
    <button class="tab-button active" onclick="openTab('overview', event)">Overview</button>
    <button class="tab-button" onclick="openTab('comparison', event)">State Comparison</button>
    <button class="tab-button" onclick="openTab('maps', event)">Maps</button>
    <button class="tab-button" onclick="openTab('ml', event)">ML Insights</button>
    <button class="tab-button" onclick="openTab('policy', event)">Policy & Law</button>
</div>

<!-- ================= OVERVIEW ================= -->
<div id="overview" class="tab-content active">

    <h2>National & State Overview</h2>

    <div class="controls">
        <div>
            <label><strong>Select State / UT:</strong></label><br>
            <select id="stateSelect"></select>
        </div>

        <div>
            <label><strong>Map View:</strong></label><br>
            <select id="mapMode">
                <option value="ipc">IPC Crime Rate (2022)</option>
                <option value="murder">Murder Rate (2022)</option>
                <option value="chargesheet">Chargesheeting Rate (2022)</option>
                <option value="kidnap">Kidnapping Recovery %</option>
                <option value="policy">Policy Priority</option>
                <option value="cluster">Crime Cluster (ML)</option>
            </select>
        </div>
    </div>

    <div class="kpi-container">
        <div class="kpi-card"><h3>IPC Crime Rate</h3><p id="kpi-ipc">—</p></div>
        <div class="kpi-card"><h3>Murder Rate</h3><p id="kpi-murder">—</p></div>
        <div class="kpi-card"><h3>Chargesheeting Rate</h3><p id="kpi-charge">—</p></div>
        <div class="kpi-card"><h3>Kidnapping Recovery %</h3><p id="kpi-kidnap">—</p></div>
        <div class="kpi-card"><h3>Crime Cluster</h3><p id="kpi-cluster">—</p></div>
    </div>

    <h3>India Crime Map</h3>
    <div id="map"></div>
</div>

<!-- ================= STATE COMPARISON ================= -->
<div id="comparison" class="tab-content">

    <div class="comparison-header">
        <h2> State Performance vs Benchmarks</h2>
    </div>

    <!-- CONTROLS -->
    <div class="comparison-controls-grid">

        <div class="control-group">
            <label><strong>Select Primary State:</strong></label>
            <select id="comparisonStateSelect"></select>
        </div>

        <div class="control-group">
            <label><strong>Compare Against:</strong></label>
            <select id="benchmarkMode">
                <option value="national">National Average</option>
                <option value="cluster">Cluster Average</option>
                <option value="peers">Peer States (Similar IPC)</option>
            </select>
        </div>

        <div class="control-group full-width right-align">
            <label><strong>Compare Multiple States:</strong></label>
            <select id="multiStateSelect" multiple size="8"></select>
            <small>Hold Ctrl / Cmd to select multiple states</small>
        </div>

    </div>

    <!-- ================= MAIN GRID ================= -->
    <div class="comparison-grid">

        <!-- LEFT PANEL -->
        <div class="comparison-panel">
            <h3>State vs Benchmark</h3>
            <p class="panel-subtitle">
                Comparing key crime indicators against selected benchmark
            </p>

            <canvas id="benchmarkBarChart" height="220"></canvas>

            <div class="delta-strip">
                <span>IPC: <strong id="delta-ipc">—</strong></span>
                <span>Murder: <strong id="delta-murder">—</strong></span>
                <span>Chargesheeting: <strong id="delta-charge">—</strong></span>
            </div>
        </div>

        <!-- RIGHT PANEL -->
        <div class="comparison-panel">
            <h3>Multi-State Comparison</h3>
            <p class="panel-subtitle">
                Comparative crime indicators across selected states
            </p>

            <canvas id="multiStateBarChart" height="260"></canvas>

        

            <canvas id="crimeSeverityLineChart" height="220"></canvas>
        </div>

    </div>

    <!-- ================= INSIGHTS ================= -->
    <div class="comparison-insight">
        <h3>Key Insights</h3>
        <p id="comparisonInsightText">
            Select a state to generate comparison insights.
        </p>
    </div>

    <div class="comparison-footer">
        <small>
            Source: NCRB | Period: 2020–2022 | Methodology: Cluster-based benchmarking
        </small>
    </div>

</div>

<!-- ================= MAPS ================= -->
<div id="maps" class="tab-content">

    <!-- ================= MAP SECTION ================= -->
    <h2>Advanced Crime Maps</h2>

    <p class="section-subtitle">
        Spatial distribution of crime, justice efficiency, and risk typologies across Indian states
    </p>

    <label><strong>Select Map Category:</strong></label><br><br>

    <select id="mapSelect" onchange="updatePolicyMap()">
        <option value="ipc_rate">IPC Crime Rate</option>
        <option value="murder_rate">Murder Rate</option>
        <option value="chargesheet_efficiency">Chargesheeting Efficiency</option>
        <option value="conviction_gap">Conviction Gap</option>
        <option value="urban_rural">Urban–Rural Crime Contrast</option>
        <option value="crime_clusters">Crime Risk Clusters (ML)</option>
    </select>

    <h3 id="policyMapTitle" style="margin-top:20px;"></h3>

    <img id="policyMapImage" class="policy-map-image" />

    <div class="policy-insight-box">
        <p id="policyMapInsight"></p>
        <ul id="policyImplications"></ul>
    </div>

    <!-- ================= DIVIDER ================= -->
    <hr style="margin:50px 0;">

    <!-- ================= CHART SECTION ================= -->
    <h2>Analytical Crime Charts</h2>

    <!-- ================= CHART SECTION ================= -->
<div class="charts-section">

    <h2>Analytical Crime Charts</h2>

    <p class="section-subtitle">
        Indicator-based analysis supporting spatial crime patterns,
        justice system performance, and policy prioritisation
    </p>

    <label><strong>Select Analytical Chart:</strong></label><br><br>

    <select id="chartSelect" onchange="updatePolicyChart()">
        <!-- CORE CRIME DISTRIBUTION -->
        <option value="top_ipc_states">Top 10 States by IPC Crimes</option>
        <option value="ipc_trends">IPC Crime Trends (2020–2022)</option>
        <option value="crime_share">Share of IPC Crimes (Top States vs Others)</option>

        <!-- JUSTICE SYSTEM PERFORMANCE -->

        <option value="charge_vs_ipc">Chargesheeting vs IPC Crime Rate</option>

        <!-- SOCIO-DEMOGRAPHIC CONTEXT -->
        <option value="urban_vs_ipc">Urbanization vs IPC Crime Rate</option>
        <option value="ipc_urban_dist">IPC Crime Distribution by Urbanization</option>
        <option value="ipc_vs_murder">IPC Crime Rate vs Murder Rate</option>

        <!-- STRUCTURAL / ADVANCED ANALYTICS -->
        <option value="ipc_treemap">IPC Crime Concentration (Treemap)</option>
        <option value="crime_correlation">Crime & Justice Correlation Matrix</option>
        <option value="state_radar">State Crime Profile (Radar)</option>
    </select>

    <!-- ===== CHART TITLE ===== -->
    <h3 id="policyChartTitle" style="margin-top:25px;"></h3>

    <!-- ===== CHART IMAGE ===== -->
    <img
        id="policyChartImage"
        class="policy-chart-image"
        alt="Selected analytical crime chart"
        style="margin-top:15px;"
    />

    <!-- ===== POLICY INSIGHT ===== -->
    <div class="policy-insight-box">
        <p id="policyChartInsight"></p>

        <h4>Policy Implications</h4>
        <ul id="policyChartImplications"></ul>
    </div>

</div>

<!-- ================= ML ================= -->
<div id="ml" class="tab-content">
    <h2>Machine Learning Insights</h2>
</div>

<!-- ================= POLICY ================= -->
<div id="policy" class="tab-content">
    <h2>Policy & Legal Framework</h2>
</div>

<script src="script.js"></script>
<script src="comparison.js"></script>
</body>
</html>
